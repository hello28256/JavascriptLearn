<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>函数</title>
    <script>
        'use strict'
        // =========================================================
        // =========================定义函数=========================
        // 定义函数的两种方式
        // 方式一：
        function abs(x) {
            // 手动抛出异常来判断
            if(typeof x!== 'number'){
                throw 'Not a Number';
            }
            console.log("x=>"+x);
            for (var i = 0; i < arguments.length; i++) {
                console.log(arguments[i]);
            }
            if(x>=0){
                return x;
            }else{
                return -x;
            }
        }
        // // 方式二
        // var abs = function (x){
        //     if(x>=0){
        //         return x;
        //     }else{
        //         return -x;
        //     }
        // }
        console.log(abs(-12));
        console.log(abs(-80));
        //console.log(abs());
        console.log(abs(1,2,3,4));
        // 参数问题 javaScript可以传任意个参数，也可以不传递参数。

        function aaa(a,b,...rest){
            console.log("a=>" + a);
            console.log("b=>" + b);
            console.log(rest); // rest是一个数组 必须要用...标识
        }
        aaa(1,2,3,4);

        // ==========================================================
        // =========================函数作用域=========================
        function str(){
            var x = 1;
            x = x + 1;
        }
        // x = x + 2; // Uncaught ReferenceError: x is not defined
        // 函数内部变量只能在内部使用

        var y = 100;
        function str2(){
            var x = 'A';
            x = x + 1;
        }
        //不同函数的局部变量名之间不冲突
        function num() {
            var x = 1;

            // 内部函数可以访问外部函数的成员，反之则不行
            function num2(){
                var y = x + 1;  // 2
            }

            // var z = y + 1;  // Uncaught ReferenceError: y is not defined
            // console.log(z);
        }
        // 假设，内部函数变量和外部函数变量，重名！
        function num(){
            var x=1;
            function num2(){
                var x = 'A';
                console.log('inner' + x);
            }
            console.log('outer' + x);
            num2();
        }
        //优先使用自己的函数变量
        num();
        //养成规范：所有 的变量定义都放在函数的头部，不要乱放，便于代码维护；
        // 全局变量
        x = 1;
        function f() {
            console.log(x);
        }
        f();
        console.log(x);

        var x = 'xxx';
        alert(x);
        alert(window.x); // 与alert作用一致，alert() 这个函数本身也是一个window的变量；
        var x = 'xxx';
        window.alert(x);
        var old_alter = window.alert;
        window.alert = function () {
        };
        // alter()失效了
        window.alert(123);
        // 恢复
        window.alert = old_alter;
        window.alert(453);

        //由于我们的所有变量都会绑定到window上。如果不同的JS文件，使用了相同的全局变量，就会产生冲突—>如何减少这样的冲突？
        // 唯一全局变量
        var subei = {};
        // 定义全局变量
        subei.name = 'subeiLY';
        subei.add = function (a,b){
            return a+b;
        }
        function bbb() {
            let i;
            for (i = 0; i < 100; i++) {
                console.log(i);
            }
            console.log(i+1);
        }
        bbb();
        //常量关键字 const
        // =========================================================
        // =========================方法============================
        //方法就是把函数放在对象的里面，对象只有两个东西：属性和方法。
        var subeily = {
            name:'哇哈哈',
            birth:2000,
            // 方法
            age:function () {
                // 今年-出生年
                var now = new Date().getFullYear();
                return now-this.birth;
            }
        }
        // 属性
        subeily.name;
        // 方法，注意带()
        subeily.age();

        function getAge() {
            // 今年-出生年
            var now = new Date().getFullYear();
            return now -this.birth;
        }
        var subei = {
            name:'可乐',
            birth: 2002,
            age:getAge
        }
        subei.age();
        getAge();
        //this是无法指向的，是默认指向调用它的那个对象的；

        function getAge() {
            // 今年-出生年
            var now = new Date().getFullYear();
            return now -this.birth;
        }
        var subei = {
            name:'可乐',
            birth: 2002,
            age:getAge
        }
        // subei.age();
        var xiaosan = {
            name:'xiaosan',
            birth:2001,
            age:getAge
        }
        getAge.apply(xiaosan,[]);
    </script>
</head>
<body>

</body>
</html>